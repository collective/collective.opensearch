<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="collective.opensearch">
<body>
    <metal:content-core fill-slot="content-core">
        <metal:content-core define-macro="content-core">
            <div id="content-core" i18n:domain="plone"
                tal:define="results view/get_search_results">
                <form name="opensearchform"
                      action="."
                      class="searchPage"
                      tal:attributes="action string:${here/absolute_url}/@@oslink_view">
                    <input class="searchPage"
                           name="SearchableText"
                           type="text"
                           size="25"
                           title="Search Site"
                           i18n:attributes="title title_search_title;"
                           tal:attributes="value view/searchterm;"
                           />
                    <input class="searchPage searchButton"
                           type="submit"
                           value="Search"
                           i18n:attributes="value label_search;"/>
                </form>
                <br/>
                <h2 class="documentFirstHeading">
                    <span i18n:translate="heading_search_results">
                        Search results
                    </span>
                    <span class="discreet">
                    &mdash;
                    <span i18n:translate="batch_x_items_matching_your_criteria"
                    ><span i18n:name="number"
                    tal:omit-tag=""
                    tal:content="python:len(results)">234</span> items matching your search terms</span>
                  </span>
                </h2>
                <div tal:condition="not: results">
                    <p><strong i18n:translate="description_no_results_found">No results were found.</strong></p>
                </div>
                <div tal:condition="results">

                    <dl class="searchResults">
                    <tal:results repeat="result results">
                        <dt>
                           <a
                             href="#"
                             tal:attributes="href result/link"
                             tal:content="result/title" />
                        </dt>
                        <dd>
                            <span tal:replace="result/summary" />
                            <!--span tal:replace="python:plone_view.cropText(result['summary'], desc_length, desc_ellipsis)">
                                Cropped description
                            </span-->
                            <span class="documentByLine">
                                <span tal:define="tags result/tags|nothing"
                                      tal:condition="tags">
                                    &mdash;
                                    <tal:filedunder i18n:translate="label_filed_under">Filed under:</tal:filedunder>
                                        <span tal:repeat="tag tags">
                                            <a href=""
                                               class="link-tag"
                                               rel="tag"
                                               tal:content="python:tag['label'] or tag['term']"
                                               tal:attributes="href tag/scheme|nothing">
                                               Tag
                                            </a><tal:separator condition="not: repeat/tag/end">,</tal:separator>
                                        </span>
                                </span>
                            </span>
                        </dd>
                    </tal:results>
                    </dl>
                </div>
            </div>
        </metal:content-core>
    </metal:content-core>
</body>
</html>
